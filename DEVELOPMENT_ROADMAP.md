# 꿈이자라는뜰 개발 로드맵

## 📊 현재 상태 (Phase 0 - 완료)

### ✅ 완료된 작업
- [x] Next.js 16 + TypeScript 프로젝트 셋업
- [x] Firebase 인증 통합 (이메일 링크 + 구글)
- [x] MUI v6 테마 및 컴포넌트 설정
- [x] 기본 레이아웃 컴포넌트 (Header, Footer, Sidebar)
- [x] TypeScript 타입 정의 (User, Student, Record 등)
- [x] Firestore Security Rules
- [x] 간단한 대시보드 페이지

---

## 🚀 Phase 1: 사용자 온보딩 및 프로필 관리 (우선순위: HIGH)

### 목표
신규 사용자가 역할을 선택하고 프로필을 설정할 수 있도록 온보딩 플로우 구축

### 작업 항목

#### 1.1 온보딩 플로우 (예상 시간: 2일)
- [ ] **온보딩 화면 설계**
  - 역할 선택 페이지 (`/onboarding/role`)
  - Teacher, Parent, Individual 역할 선택 UI
  - 각 역할에 대한 설명 카드

- [ ] **역할별 프로필 설정**
  - Teacher: 소속 기관 등록/선택
  - Parent: 호칭 설정, 자녀 연결
  - Individual: 개인 정보 입력

- [ ] **Firestore 사용자 데이터 생성**
  - 인증 후 자동으로 `/users/{uid}` 문서 생성
  - 역할 및 프로필 정보 저장

#### 1.2 학생(Student) 관리 (예상 시간: 2일)
- [ ] **학생 등록 페이지** (`/students/create`)
  - 학생 기본 정보 입력 폼
  - 사진 업로드 (Firebase Storage)
  - 보호자/교사 연결 설정

- [ ] **학생 목록 페이지** (`/students`)
  - 교사: 자신이 관리하는 학생 목록
  - 보호자: 자신의 자녀 목록
  - 개인: 본인 프로필

- [ ] **학생 상세 페이지** (`/students/[id]`)
  - 학생 기본 정보 표시
  - 최근 기록 타임라인 미리보기
  - 포트폴리오 완성도 표시

---

## 📝 Phase 2: 기록 작성 및 관리 (F01 - 우선순위: HIGH)

### 목표
교사와 보호자가 일상 기록을 작성하고 인과 관계를 시각화

### 작업 항목

#### 2.1 기록 작성 폼 (F01.01) (예상 시간: 3일)
- [ ] **기록 작성 페이지** (`/records/create`)
  - 학생 선택 드롭다운
  - 등교 전/중/후 컨텍스트 선택 (필수)
  - 비정형 텍스트 입력 (Markdown 지원)
  - 감정 카드 선택 UI (최소 10가지 감정)
  - 체크리스트 추가 기능
  - 사진/동영상 업로드 (최대 20개)
  - 파일 첨부 (최대 5개)

- [ ] **미디어 업로드 처리**
  - Firebase Storage 통합
  - 이미지 압축 및 최적화
  - 업로드 진행률 표시

- [ ] **Firestore 기록 저장**
  - `/records/{recordId}` 문서 생성
  - 메타데이터 자동 생성 (timestamp, author 등)

#### 2.2 인과 시각화 (F01.02) (예상 시간: 3일)
- [ ] **연결된 기록 자동 표시**
  - 교사가 기록 작성 시, 해당 날짜의 보호자 "등교 전" 기록 자동 조회
  - 사이드바에 연결된 기록 표시
  - 기록 간 연결 저장 (`linkedRecordId`)

- [ ] **타임라인 뷰** (`/timeline`)
  - 학생별 기록 시간순 정렬
  - 등교 전/중/후 컨텍스트별 색상 구분
  - 연결된 기록 화살표로 시각화

- [ ] **필터링 및 검색**
  - 날짜 범위 선택
  - 작성자(교사/보호자) 필터
  - 감정 카드 필터
  - 키워드 검색

#### 2.3 댓글 및 피드백 (예상 시간: 1일)
- [ ] **댓글 시스템**
  - 기록에 댓글 작성/수정/삭제
  - 실시간 알림 (Firebase Cloud Messaging)

---

## 🤖 Phase 3: AI 통합 - 감정 중립화 (F02 - 우선순위: MEDIUM)

### 목표
교사의 기록에서 감정적/모호한 표현을 감지하고 중립적 언어로 제안

### 작업 항목

#### 3.1 Gemini API 통합 (예상 시간: 2일)
- [ ] **API 설정**
  - Gemini API 키 환경 변수 설정
  - Next.js API Route 생성 (`/api/ai/neutralize`)

- [ ] **NLP 텍스트 플래그 모델**
  - Gemini API로 텍스트 분석
  - AGG(공격적), VAG(모호한) 표현 감지
  - 신뢰도 점수 반환

#### 3.2 중립화 제안 UI (예상 시간: 2일)
- [ ] **실시간 분석**
  - 기록 작성 중 debounce 처리
  - AI 분석 트리거 (500ms 대기)

- [ ] **제안 오버레이**
  - 감지된 표현 하이라이트
  - 중립적 대체 텍스트 제안
  - 수락/거절 버튼

- [ ] **감사 로그**
  - 원본 텍스트 보존 (`narrativeTextRaw`)
  - 중립화 적용 여부 플래그 (`aiNeutralized`)
  - 사용자 피드백 수집

#### 3.3 성능 모니터링 (예상 시간: 1일)
- [ ] **AI 모델 평가**
  - Perplexity (PPL) 지표 측정
  - 수락률 추적
  - 개선 루프 구축

---

## 📊 Phase 4: AI 역량 추출 및 포트폴리오 (F03 - 우선순위: MEDIUM)

### 목표
축적된 기록에서 역량을 추출하고 자동으로 포트폴리오 생성

### 작업 항목

#### 4.1 역량 추출 (예상 시간: 3일)
- [ ] **배치 처리 시스템**
  - Cloud Functions 또는 Vercel Cron Job
  - 주기적으로 학생별 기록 분석

- [ ] **Gemini API 역량 추출**
  - 전체 기록 이력 입력
  - 역량 키워드 추출 (정리정돈, 의사소통 등)
  - 역량별 근거 기록 매핑

- [ ] **역량 데이터베이스**
  - `/competencies/{competencyId}` 컬렉션
  - 계층적 역량 온톨로지
  - 직업 데이터베이스 연결

#### 4.2 포트폴리오 생성 (예상 시간: 3일)
- [ ] **마이페이지** (`/profile`)
  - 개인(C) 역할 전용 페이지
  - 감정 타임라인 차트
  - 핵심 역량 시각화
  - 완성도 진행률 표시

- [ ] **PDF 생성**
  - React-PDF 또는 Puppeteer 사용
  - 표준화된 포트폴리오 템플릿
  - 역량 및 기록 요약 포함

- [ ] **직업 추천**
  - 역량 기반 매칭 알고리즘
  - 추천 직업 목록 표시

---

## 🔐 Phase 5: 권한 관리 및 보안 (F04 - 우선순위: HIGH)

### 작업 항목

#### 5.1 역할 기반 접근 제어 (예상 시간: 2일)
- [ ] **관계도 설정**
  - 교사-학생 연결 관리
  - 보호자-학생 연결 관리
  - 초대 시스템 (이메일 링크)

- [ ] **민감도 태그**
  - 기록별 공개/공유/비공개 설정
  - 역할별 가시성 제어

#### 5.2 Firestore Rules 강화 (예상 시간: 1일)
- [ ] **규칙 테스트**
  - Firebase Emulator로 로컬 테스트
  - 역할별 권한 검증

- [ ] **감사 로그**
  - 중요 작업 로그 기록
  - 비정상 접근 모니터링

---

## 📱 Phase 6: 모바일 최적화 및 PWA (우선순위: LOW)

### 작업 항목

#### 6.1 반응형 디자인 (예상 시간: 2일)
- [ ] **모바일 UI 개선**
  - 모바일 전용 네비게이션
  - 터치 최적화
  - 작은 화면 레이아웃

#### 6.2 PWA 설정 (예상 시간: 1일)
- [ ] **Service Worker**
  - 오프라인 지원
  - 캐싱 전략

- [ ] **앱 설치**
  - manifest.json
  - 아이콘 및 스플래시 화면

---

## 🧪 Phase 7: 테스트 및 품질 보증 (우선순위: MEDIUM)

### 작업 항목

#### 7.1 단위 테스트 (예상 시간: 3일)
- [ ] **Jest + React Testing Library**
  - 컴포넌트 테스트
  - Firebase 함수 테스트
  - 커버리지 80% 목표

#### 7.2 E2E 테스트 (예상 시간: 2일)
- [ ] **Playwright**
  - 주요 사용자 플로우 테스트
  - 인증, 기록 작성, 타임라인 조회

---

## 🚀 Phase 8: 배포 및 모니터링 (우선순위: HIGH)

### 작업 항목

#### 8.1 프로덕션 배포 (예상 시간: 1일)
- [ ] **Vercel 배포**
  - 환경 변수 설정
  - 도메인 연결
  - Firebase 승인 도메인 추가

#### 8.2 모니터링 설정 (예상 시간: 1일)
- [ ] **성능 모니터링**
  - Firebase Performance Monitoring
  - Vercel Analytics
  - Sentry 에러 추적

---

## 📅 예상 일정 (총 30-35일)

| Phase | 작업 내용 | 예상 기간 | 우선순위 |
|-------|----------|----------|---------|
| Phase 1 | 온보딩 및 프로필 관리 | 4일 | HIGH |
| Phase 2 | 기록 작성 및 타임라인 | 7일 | HIGH |
| Phase 3 | AI 감정 중립화 | 5일 | MEDIUM |
| Phase 4 | AI 역량 추출 및 포트폴리오 | 6일 | MEDIUM |
| Phase 5 | 권한 관리 및 보안 | 3일 | HIGH |
| Phase 6 | 모바일 최적화 | 3일 | LOW |
| Phase 7 | 테스트 | 5일 | MEDIUM |
| Phase 8 | 배포 및 모니터링 | 2일 | HIGH |

**총 예상 기간: 5-6주**

---

## 🎯 즉시 착수 항목 (이번 주)

1. **대시보드 개선** (오늘)
   - 역할별 대시보드 뷰
   - 퀵 액션 버튼
   - 최근 활동 요약

2. **온보딩 플로우** (1-2일)
   - 역할 선택 페이지
   - 프로필 설정 폼

3. **학생 등록** (1-2일)
   - 학생 생성 폼
   - 학생 목록 페이지

4. **기록 작성 MVP** (2-3일)
   - 기본 기록 작성 폼
   - Firestore 저장

---

## 📝 참고사항

- **코드 품질**: 200줄 이하 파일, Atomic Design 준수
- **AI 우선**: 텍스트 처리는 항상 AI 사용 (규칙 기반 금지)
- **빌드 필수**: 모든 변경 후 `yarn build` 검증
- **커밋 규칙**: 기능 완성 시마다 커밋

---

**다음 단계: 대시보드 개선 → 온보딩 플로우 → 학생 관리 → 기록 작성**
